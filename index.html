<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>던전 RPG - 거대화!</title>

    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background-color: #3d3a3a; color: #ecf0f1; display: flex; flex-direction: column; align-items: center; margin: 0; padding-top: 20px; }
        #game-container { display: flex; }
        #map-area { position: relative; width: 1600px; height: 900px; background-image: url('map.png'); background-size: contain; background-repeat: no-repeat; background-color: #f0ead6; border: 3px solid #95a5a6; }
        
        /* ★★★ 캐릭터 공통 스타일 크기 수정 ★★★ */
        .character {
            position: absolute;
            /* 기존 48px에서 80px로 크기를 키웠습니다. */
            width: 80px;
            height: 80px;
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 10;
        }

        #player {
            background-image: url('evan.png');
        }

        #goblin {
            background-image: url('goblin.png');
            /* 고블린 크기도 플레이어와 동일하게 80px로 맞춥니다. */
        }

        #info-area { width: 300px; margin-left: 20px; padding: 10px; background-color: #2c3e50; border: 1px solid #7f8c8d; display: flex; flex-direction: column; }
        #message-log { flex-grow: 1; overflow-y: auto; border: 1px solid #7f8c8d; padding: 5px; background-color: #34495e; margin-top: 10px; }
        #message-log p { margin: 5px 0; }
    </style>
</head>
<body>
    <h1>던전 RPG</h1>
    <div id="game-container">
        <div id="map-area">
            <div id="player" class="character"></div>
            <div id="goblin" class="character"></div>
        </div>
        <div id="info-area">
            <h2>플레이어 정보</h2>
            <div id="player-stats">
                <p>이름: <span id="player-name">에반</span></p>
                <p>위치: <span id="player-pos">0, 0</span></p>
            </div>
            <h2>메시지</h2>
            <div id="message-log">
                <p>뭔가... 몸이 커진 것 같다!</p>
            </div>
        </div>
    </div>

    <script>
        // 자바스크립트 코드는 변경할 필요가 없습니다.
        // CSS에서 크기가 바뀌면 자동으로 충돌 감지 로직에 반영됩니다.
        document.addEventListener('DOMContentLoaded', () => {
            const playerElement = document.getElementById('player');
            const goblinElement = document.getElementById('goblin');
            const playerPosUI = document.getElementById('player-pos');
            const messageLog = document.getElementById('message-log');
            const PLAYER_SPEED = 8;

            let player = { x: 160, y: 350, element: playerElement };
            
            let goblin = {
                x: 600,
                y: 350,
                element: goblinElement,
                isAlive: true
            };

            const wallBoundaries = [];

            function movePlayer(dx, dy) {
                player.x += dx;
                player.y += dy;
                player.element.style.left = player.x + 'px';
                player.element.style.top = player.y + 'px';
                playerPosUI.textContent = `${Math.round(player.x)}, ${Math.round(player.y)}`;
                checkGoblinCollision();
            }
            
            function checkGoblinCollision() {
                if (!goblin.isAlive) { return; }

                const isColliding = 
                    player.x < goblin.x + goblin.element.clientWidth &&
                    player.x + player.element.clientWidth > goblin.x &&
                    player.y < goblin.y + goblin.element.clientHeight &&
                    player.y + player.element.clientHeight > goblin.y;
                
                if (isColliding) {
                    startCombat();
                }
            }

            function startCombat() {
                logMessage("야생의 고블린이 나타났다!");
                logMessage("치열한 싸움 끝에... 에반은 고블린을 물리쳤다!");
                goblin.element.style.display = 'none';
                goblin.isAlive = false;
            }

            function logMessage(message) {
                const newMessage = document.createElement('p');
                newMessage.textContent = message;
                messageLog.prepend(newMessage);
            }
            
            document.addEventListener('keydown', (e) => {
                switch (e.key) {
                    case 'ArrowUp': movePlayer(0, -PLAYER_SPEED); break;
                    case 'ArrowDown': movePlayer(0, PLAYER_SPEED); break;
                    case 'ArrowLeft': movePlayer(-PLAYER_SPEED, 0); break;
                    case 'ArrowRight': movePlayer(PLAYER_SPEED, 0); break;
                }
            });

            function initializeGame() {
                player.element.style.left = player.x + 'px';
                player.element.style.top = player.y + 'px';
                playerPosUI.textContent = `${Math.round(player.x)}, ${Math.round(player.y)}`;
                goblin.element.style.left = goblin.x + 'px';
                goblin.element.style.top = goblin.y + 'px';
            }

            initializeGame();
        });
    </script>
</body>
</html>